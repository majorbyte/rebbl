extends ../no-cache-sub-relayout.pug
block prepend vars
  - let options = {company:"rebbl"}


block content          
  .container-fluid
    .row.col-12.no-gutters.text-center(style="font-size:1.5em")
      .col-2
      .col.row.no-gutters
        .col(title="Eurotrasher") ğŸ’¶
        .col(title="All-American Hero") ğŸ’µ
        .col(title="Down Under My Boot") ğŸ¦˜
        .col(title="The Hard Yards") ğŸ‘Ÿ
        .col(title="New Sheriff In Town") ğŸ¥‡
      .col.row.no-gutters
        .col(title="Flat Track Bully") ğŸ
        .col(title="I Miss The Devastational") â˜ 
        .col(title="#Collusion") ğŸˆ
        .col(title="Hell of a Drug") ğŸ’‰
        .col(title="Clawgeous") ğŸ¦‚
      .col.row.no-gutters
        .col(title="You're Not Famous Anymore!") ğŸ’¯
        .col(title="Referee's a Scrooge") ğŸ’°
        .col(title="Channel Surfing") ğŸ„
        .col(title="Pain to Win") ğŸ©¹
        .col(title="Style Guide") ğŸ¦®
      .col.row.no-gutters
        .col(title="The Passter") ğŸ§¤
        .col(title="Tough Love") ğŸ’”
        .col(title="Stunty Double") ğŸ–
        .col(title="Mind The Gap") ğŸ‘–
        .col(title="Discount Armour Emporium Award for Outstanding Customer Loyalty") ğŸ†
    //ko foreach: coaches
    .row.col-12

      .col-2
        span(data-bind="{text:$data.name}")
        // ko if: $data.mainLeague.indexOf("GMan") > 0
        i(title="gman coach") ğŸ’¶
        // /ko
        // ko if: $data.mainLeague.indexOf("REL") > 0
        i(title="rel coach") ğŸ’µ
        // /ko
        // ko if: $data.mainLeague.indexOf("Big") > 0
        i(title="big o coach") ğŸ¦˜
        // /ko
        // ko if: $data.mainCompetition.indexOf("Division 1") > 0
        i(title="div 1 coach") ğŸ¥‡
        // /ko
        // ko if: $data.mainCompetition.indexOf("Division 5") > 0
        i(title="div 5 coach") ğŸ
        // /ko
      .col.row.no-gutters.text-center
        .col( data-bind="{text:$data.badges.eurotrasher ? 'ğŸ¹' : ''}")
        .col(data-bind="{text:$data.badges.allAmericanHero ? 'ğŸ¹' : ''}")
        .col(data-bind="{text:$data.badges.downUnderMyBoot ? 'ğŸ¹' : ''}")
        // ko if: $data.badges.theHardYards >= 10
        .col() ğŸ¹
        // /ko
        // ko if: $data.badges.theHardYards < 10
        .col()
          .progress
            .progress-bar.progress-bar-striped.bg-success(role="progressbar" aria-valuemin="0" aria-valuemax="10" data-bind="attr:{'title':`${$data.badges.theHardYards} / 10`, 'aria-valuenow':$data.badges.theHardYards, style:`width:${$data.badges.theHardYards*10}%`}")
        // /ko
        .col(data-bind="{text:$data.badges.newSheriffInTown ? 'ğŸ¹' : ''}")
      .col.row.no-gutters.text-center
        .col(data-bind="{text:$data.badges.flatTrackBully ? 'ğŸ¹' : ''}")
        // ko if: $data.badges.iMissTheDevastational >= 5
        .col ğŸ¹
        // /ko
        // ko if: $data.badges.iMissTheDevastational < 5
        .col
          .progress
            .progress-bar.progress-bar-striped.bg-success(role="progressbar" aria-valuemin="0" aria-valuemax="5" data-bind="attr:{'title':`${$data.badges.iMissTheDevastational} / 5`, 'aria-valuenow':$data.badges.iMissTheDevastational, style:`width:${$data.badges.iMissTheDevastational*20}%`}")
        // /ko
        // ko if: $data.badges.collusion >= 15
        .col ğŸ¹
        // /ko
        // ko if: $data.badges.collusion < 15
        .col
          .progress
            .progress-bar.progress-bar-striped.bg-success(role="progressbar" aria-valuemin="0" aria-valuemax="15" data-bind="attr:{'title':`${$data.badges.collusion} / 15`,'aria-valuenow':$data.badges.collusion, style:`width:${$data.badges.collusion*6.6667}%`}")
        // /ko
        .col(data-bind="{text:$data.badges.hellOfADrug ? 'ğŸ¹' : ''}")
        .col(data-bind="{text:$data.badges.Clawgeous ? 'ğŸ¹' : ''}")
      .col.row.no-gutters.text-center
        .col(data-bind="{text:$data.badges.youreNotFamousAnymore ? 'ğŸ¹' : ''}")
        .col(data-bind="{text:$data.badges.refereeAScrooge ? 'ğŸ¹' : ''}")
        // ko if: $data.badges.channelSurfing >= 10
        .col ğŸ¹
        // /ko
        // ko if: $data.badges.channelSurfing < 10
        .col
          .progress
            .progress-bar.progress-bar-striped.bg-success(role="progressbar" aria-valuemin="0" aria-valuemax="15" data-bind="attr:{'title':`${$data.badges.channelSurfing} / 10`,'aria-valuenow':$data.badges.channelSurfing, style:`width:${$data.badges.channelSurfing*10}%`}")
        // /ko
        // ko if: $data.badges.painToWin >= 25
        .col ğŸ¹
        // /ko
        // ko if: $data.badges.painToWin < 25
        .col
          .progress
            .progress-bar.progress-bar-striped.bg-success(role="progressbar" aria-valuemin="0" aria-valuemax="15" data-bind="attr:{'title':`${$data.badges.painToWin} / 25`,'aria-valuenow':$data.badges.painToWin, style:`width:${$data.badges.painToWin*4}%`}")
        // /ko
        .col(data-bind="{text:$data.badges.styleGuide ? 'ğŸ¹' : ''}")
      .col.row.no-gutters.text-center
        // ko if: $data.badges.thePasster >= 25
        .col ğŸ¹
        // /ko
        // ko if: $data.badges.thePasster < 25
        .col
          .progress
            .progress-bar.progress-bar-striped.bg-success(role="progressbar" aria-valuemin="0" aria-valuemax="15" data-bind="attr:{'title':`${$data.badges.thePasster} / 25`,'aria-valuenow':$data.badges.thePasster, style:`width:${$data.badges.thePasster*4}%`}")
        // /ko
        .col(data-bind="{text:$data.badges.toughLove ? 'ğŸ¹' : ''}")
        // ko if: $data.badges.stuntyDouble >= 2
        .col ğŸ¹
        // /ko
        // ko if: $data.badges.stuntyDouble < 2
        .col
          .progress
            .progress-bar.progress-bar-striped.bg-success(role="progressbar" aria-valuemin="0" aria-valuemax="15" data-bind="attr:{'title':`${$data.badges.stuntyDouble} / 2`,'aria-valuenow':$data.badges.stuntyDouble, style:`width:${$data.badges.stuntyDouble*50}%`}")
        // /ko
        .col(data-bind="{text:$data.badges.mindTheGap ? 'ğŸ¹' : ''}")
        // ko if: $data.badges.discountArmour >= 200
        .col ğŸ¹
        // /ko
        // ko if: $data.badges.discountArmour < 200
        .col
          .progress
            .progress-bar.progress-bar-striped.bg-success(role="progressbar" aria-valuemin="0" aria-valuemax="15" data-bind="attr:{'title':`${$data.badges.discountArmour} / 200`,'aria-valuenow':$data.badges.discountArmour, style:`width:${$data.badges.discountArmour*0.5}%`}")
        // /ko
    // /ko


block scripts
  - if (process.env.NODE_ENV === 'production')
    script(src="https://cdn.rebbl.net/scripts/knockout-3.4.2.js")
    script(src="https://cdn.rebbl.net/scripts/knockout-mapping.min.js")
    script(src="https://cdn.rebbl.net/scripts/knockout-es5.js")
  - else
    script(src="/scripts/knockout-3.4.2.js")
    script(src="/scripts/knockout-mapping.min.js")
    script(src="/scripts/knockout-es5.js")

  script.
    class ViewModel{
      constructor(data){
        this.coaches = [];
        ko.track(this);
      }

      async loadBadges(){
        let response = await fetch(`/api/v2/camping/summer`);
        if (response.ok){
          this.coaches = await response.json();
        }
      }
    }

    let model = new ViewModel({});

    $(document).ready(function(){
      ko.applyBindings(model);
      model.loadBadges();
    });
    
