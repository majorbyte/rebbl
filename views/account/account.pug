extends ..\accountlayout.pug

block vars
  - var options = {subMenu: "account"}

block scripts
  script.

    $(document).ready(function(){
      $("#timezone").on('change', function(e){
        $("#tz_info").text(moment().tz(e.currentTarget.value).format('YYYY-MM-DD HH:mm Z'));
      });

      let select = document.getElementById("timezone");
      let guessed = moment.tz.guess();

      guessed = "#{user.timezone}" || guessed;
      let names = moment.tz.names();
      let l = names.length;

      for(let i = 0; i < l; i++){
        let tz = names[i];
        let option = document.createElement("option");
        option.setAttribute("value", tz);
        option.text = tz;
        if (tz === guessed){
          option.setAttribute("selected", "selected")
        }
        select.appendChild(option);
      }
      $("#tz_info").text(moment().tz(guessed).format('YYYY-MM-DD HH:mm ZZ'));

    });

block content
  div(class="container")
    form(action="/account/update" method="post" class="container signup")
      h2
        span(class="highlight")= user.reddit

      h3 Your data
      div
        label(for="coach") Blood Bowl 2 coach name
        input(type="text" id="coach" name="coach" value=user.coach  disabled)
      div
        label(for="timezone") Timezone
        select(id="timezone" name="timezone" required title="timezone")
        label(id="tz_info")
      div
        label(for="discord") Discord
        input(type="text" id="discord" name="discord" value=user.discord )
      div
        label(for="steam") Steam
        input(type="text" id="steam" name="steam" value=user.steam )
      div(style="clear:both")
        <button type="submit">Save</button>
        br
        br